function updateFileList(b,a){switch(b){case"add":consolemsg("Added or changed file {0}.".format(a));break;case"del":consolemsg("File {0} deleted.".format(a));break;default:break}}function randomImageResponse(a,b){setWallpaper(b);selectedimg=b}function dummy2varfun(d,c){}function nextRandomImage(){try{for(i=0;i<maxrandomiterations;i++){r=Math.random();if(r<randomlimitsup){consolemsg("Chosing random image with {0} iterations. r={1}<{2}".format(i,roundNumber(r,2),randomlimitsup));window.wallpaperRequestRandomFileForProperty("customrandomdirectory",randomImageResponse);return}window.wallpaperRequestRandomFileForProperty("customrandomdirectory",dummy2varfun)}}catch(a){consolemsg(parseException(a))}finally{}}function setWallpaperSingleImage(){setWallpaper(selectedimg,false)}window.wallpaperPropertyListener={applyUserProperties:function(a){if(a.backgroundcolor){try{defaultcolorcss=createRGBColor(a.backgroundcolor.value);consolemsg("Default background color: {0}.".format(setRgbLineMsg(defaultcolorcss)));setWallpaper()}catch(b){consolemsg(parseException(b))}finally{}}if(a.customrandomdirectory){if(a.customrandomdirectory.value){try{consolemsg('Set random directory "<i>{0}</i>".'.format(cutword(a.customrandomdirectory.value,maxwordlengthdirs)));setWallpaper(false,false);israndom=true;selectedfolder=a.customrandomdirectory.value;selectedimg="";lastimg="";nextRandomImage();if(randomtime>0&&israndom){clearRandomFunTimer();intervalsetminutesmsg("Randomized function",randomtime);timedrandomizefun=setInterval(nextRandomImage,randomtime)}else{clearRandomFunTimer()}}catch(b){consolemsg(parseException(b))}finally{}}else{clearAll()}}if(a.customimage){if(a.customimage.value){try{clearRandomFunTimer();setWallpaper(false,false);setWallpaper(a.customimage.value,true);israndom=false;selectedimg=a.customimage.value;selectedfolder="";lastimg=""}catch(b){consolemsg(parseException(b))}finally{}}else{clearAll()}}if(a.opacity){try{effects.opacity.value=a.opacity.value;setWallpaper(selectedimg,true)}catch(b){consolemsg(parseException(b))}finally{}}if(a.scale){try{if(a.scale.value>0){effects.scale.value=a.scale.value/100;effects.scale.value+=effects.scale.baseadd}else{consolemsg(parseError("Scale must be greater than 0"))}setWallpaper(selectedimg,true)}catch(b){consolemsg(parseException(b))}finally{}}if(a.blur){try{if(a.blur.value>=0){effects.blur.value=a.blur.value}else{consolemsg(parseError("Blur can't be a negative number"))}setWallpaper(selectedimg,true)}catch(b){consolemsg(parseException(b))}finally{}}if(a.grayscale){try{effects.grayscale.value=a.grayscale.value;setWallpaper(selectedimg,true)}catch(b){consolemsg(parseException(b))}finally{}}if(a.brightness){try{if(a.brightness.value>=0){effects.brightness.value=a.brightness.value}else{consolemsg(parseError("Brightness can't be negative"))}setWallpaper(selectedimg,true)}catch(b){consolemsg(parseException(b))}finally{}}if(a.contrast){try{if(a.contrast.value>=0){effects.contrast.value=a.contrast.value}else{consolemsg(parseError("Contrast can't be negative"))}setWallpaper(selectedimg,true)}catch(b){consolemsg(parseException(b))}finally{}}if(a.saturation){try{if(a.saturation.value>=0){effects.saturation.value=a.saturation.value}else{consolemsg(parseError("Saturation can't be negative"))}setWallpaper(selectedimg,true)}catch(b){consolemsg(parseException(b))}finally{}}if(a.huerotate){try{effects.huerotate.value=a.huerotate.value;setWallpaper(selectedimg,true)}catch(b){consolemsg(parseException(b))}finally{}}if(a.invert){try{effects.invert.value=a.invert.value;setWallpaper(selectedimg,true)}catch(b){consolemsg(parseException(b))}finally{}}if(a.sepia){try{effects.sepia.value=a.sepia.value;setWallpaper(selectedimg,true)}catch(b){consolemsg(parseException(b))}finally{}}if(a.minutes){randomtime=a.minutes.value*60000;if(randomtime>0&&israndom){try{clearRandomFunTimer();timedrandomizefun=setInterval(nextRandomImage,randomtime);intervalsetminutesmsg("Randomized function",randomtime)}catch(b){consolemsg(parseException(b))}finally{}}else{clearRandomFunTimer()}}if(a.consolefontcolor){try{consolecfg.fontcolor=createRGBColor(a.consolefontcolor.value);consolemsg("Console font color: {0}.".format(setRgbLineMsg(consolecfg.fontcolor)));$("#consoletext").css("color",consolecfg.fontcolor);$("#author").css("color","rgb(255, 255, 255)")}catch(b){consolemsg(parseException(b))}finally{}}if(a.consolebgcolor){try{consolecfg.bgcolor=createRGBColor(a.consolebgcolor.value);consolemsg("Console background color: {0}.".format(setRgbLineMsg(consolecfg.bgcolor)));$("#consoletext").css("background-color",consolecfg.bgcolor)}catch(b){consolemsg(parseException(b))}finally{}}if(a.showconsole){try{consolecfg.show=a.showconsole.value;setConsoleStatus()}catch(b){consolemsg(parseException(b))}finally{}}if(a.showauthor){try{consolecfg.showauthor=a.showauthor.value;setAuthorStatus()}catch(b){consolemsg(parseException(b))}finally{}}if(a.consolealpha){try{consolecfg.alpha=a.consolealpha.value/100;$("#console").css("opacity",consolecfg.alpha);consolemsg("Console opacity set to {0}.".format(consolecfg.alpha))}catch(b){consolemsg(parseException(b))}finally{}}if(a.consolefontsize){try{if(a.consolefontsize.value>0){consolecfg.fontsize=a.consolefontsize.value;$("#console").css("font-size","{0}px".format(consolecfg.fontsize));consolemsg("Console font-size set to {0}px.".format(consolecfg.fontsize))}else{consolemsg(parseError("Console font size can't be lower or equal than zero"))}}catch(b){consolemsg(parseException(b))}finally{}}if(a.transitionstyle){try{transitioneffect=a.transitionstyle.value;consolemsg("Set '{0}' transition effect.".format(transitioneffect))}catch(b){consolemsg(parseException(b))}finally{}}if(a.transitioneffecttime){try{transitionduration=a.transitioneffecttime.value;consolemsg("Set transition duration to {0} ms.".format(transitionduration))}catch(b){consolemsg(parseException(b))}finally{}}},userDirectoryFilesAddedOrChanged:function(a,b){if(!files.hasOwnProperty(a)){files[a]=b}else{files[a]=files[a].concat(b)}updateFileList("add",files[a])},userDirectoryFilesRemoved:function(a,d){for(var c=0;c<d.length;++c){var b=files[a].indexOf(d[c]);if(b>=0){files[a].splice(b,1)}}updateFileList("del",files[a])}};